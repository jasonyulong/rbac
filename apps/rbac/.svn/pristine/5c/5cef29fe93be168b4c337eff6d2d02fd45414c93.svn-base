/*!
 * Start Bootstrap - Admin v3.3.7+1 (https://github.com/KevinsDeveloper/bootstrap4-admin)
 * Copyright 2013-2019 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap/blob/gh-pages/LICENSE)
 */
define(["jquery","bootstrap","template","form-validator"],function(e,a,t,l){var i={open:function(a,t,l,i){var l=l||"830px",i=i||"500px";e(a).click(function(){var a=e(this).attr("data-url")||"",n=t||"编辑";Fast.api.open(a,n,{area:[l,i]})})},delmenus:function(a,t){e(a).click(function(){var a=e(this).attr("data-url"),t=e(this).attr("data-param");layer.confirm("确定要删除?",{btn:["确定","取消"]},function(l){layer.load(1),e.ajax({url:a,type:"post",dataType:"json",data:t,success:function(e){layer.closeAll("loading"),1==e.code?(layer.msg(e.msg,{icon:1,time:5e3}),location.reload()):layer.alert(e.msg,{icon:3})},error:function(e){layer.closeAll("loading"),layer.alert("请求或返回数据异常",{icon:5})}})})})},cancel:function(a){e(a).click(function(){parent.layer.closeAll()})},formSubmit:function(a,t,l){e(a).click(function(){var a=e("#title").val(),i=e("#url").val(),n=!0;if(""==e.trim(a))return layer.tips("请输入标题","#title",{tips:[2,"#FA8072"],time:1e3}),!1;if(l){var r=e("#condition").val(),o=e("#detaileType").val();if(1==o&&(n=!1,""==e.trim(r)))return layer.tips("请输入节点因子","#condition",{tips:[2,"#FA8072"],time:1e3}),!1}if(n&&""==e.trim(i))return layer.tips("请输入请求地址","#url",{tips:[3,"#FA8072"],time:1e3}),!1;var d=e(this).attr("data-url"),s=t.serializeArray();layer.load(2),e.ajax({url:d,type:"post",dataType:"json",data:s,success:function(e){layer.closeAll("loading"),1==e.code?(layer.msg(e.msg,{icon:1,time:5e3}),parent.location.reload()):layer.msg(e.msg,{icon:3})},error:function(e){layer.closeAll("loading"),layer.alert("请求或返回数据异常",{icon:5})}})})}},n={_initialize:function(){e(".selectpicker").selectpicker({selectAllText:"全选",deselectAllText:"取消"}),e.validator.setTheme("bootstrap",{validClass:"has-success",invalidClass:"has-error",bindClassTo:".form-group",formClass:"n-default n-bootstrap",msgClass:"n-right"})},index:function(){var a={add:".addmenus",edit:".editmenus",del:".delmenus",menudetail:".menudetail",addmenudetail:".addmenudetail",editdetail:".editdetail",saveMenuDetail:".saveMenuDetail",saveMenus:".saveMenus",deldetail:".deldetail"};i.open(a.add,"添加","950px","550px"),i.open(a.edit,"编辑","950px","550px"),i.open(a.menudetail,"查看节点因子","1050px","750px"),i.delmenus(a.del,"删除"),i.delmenus(a.deldetail,"删除"),i.cancel("#giveUpBtn"),i.open(a.addmenudetail,"添加节点"),i.open(a.editdetail),i.formSubmit(a.saveMenuDetail,e(".ajax-form"),!0),i.formSubmit(a.saveMenus,e(".ajax-form"),!1),e(".btn-search-icon").click(function(){return window.open("http://adminlte.la998.com/pages/UI/icons.html"),null}),e("#detaileType").change(function(){var a=e(this).val(),t=e("#url"),l=e("#condition");0==a?(l.val(""),t.attr("readonly",!1),l.attr("readonly",!0)):1==a&&(t.val(""),t.attr("readonly",!0),l.attr("readonly",!1))})}};return n});