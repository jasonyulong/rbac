/*!
 * Start Bootstrap - Admin v3.3.7+1 (https://github.com/KevinsDeveloper/bootstrap4-admin)
 * Copyright 2013-2019 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap/blob/gh-pages/LICENSE)
 */
define(["jquery","bootstrap-select","template","datatables.net","datatables-bootstrap"],function(e,a,t,a,a){var l={open:function(a,t,l,n){var l=l||"830px",n=n||"500px";e(a).click(function(){var a=e(this).attr("data-url")||"",i=t||"编辑";Fast.api.open(a,i,{area:[l,n]})})},delmenus:function(a,t){e(a).click(function(){var a=e(this).attr("data-url"),t=e(this).attr("data-param");layer.confirm("确定要删除?",{btn:["确定","取消"]},function(l){layer.load(1),e.ajax({url:a,type:"post",dataType:"json",data:{id:t},success:function(e){layer.closeAll("loading"),1==e.code?(layer.msg(e.msg,{icon:1,time:5e3}),location.reload()):layer.alert(e.msg,{icon:3})},error:function(e){layer.closeAll("loading"),layer.alert("请求或返回数据异常",{icon:5})}})})})},cancel:function(a){e(a).click(function(){parent.layer.closeAll()})},formSubmit:function(a,t,l){e(a).click(function(){var a=e("#title").val(),n=e("#url").val(),i=!0;if(""==e.trim(a))return layer.tips("请输入标题","#title",{tips:[2,"#FA8072"],time:1e3}),!1;if(l){var r=e("#condition").val(),o=e("#detaileType").val();if(1==o&&(i=!1,""==e.trim(r)))return layer.tips("请输入节点因子","#condition",{tips:[2,"#FA8072"],time:1e3}),!1}if(i&&""==e.trim(n))return layer.tips("请输入请求地址","#url",{tips:[3,"#FA8072"],time:1e3}),!1;var s=e(this).attr("data-url"),d=t.serializeArray();layer.load(2),e.ajax({url:s,type:"post",dataType:"json",data:d,success:function(e){layer.closeAll("loading"),1==e.code?(layer.msg(e.msg,{icon:1,time:5e3}),parent.location.reload()):layer.msg(e.msg,{icon:3})},error:function(e){layer.closeAll("loading"),layer.alert("请求或返回数据异常",{icon:5})}})})}},n={_initialize:function(){e(".selectpicker").selectpicker({selectAllText:"全选",deselectAllText:"取消"}),e.validator.setTheme("bootstrap",{validClass:"has-success",invalidClass:"has-error",bindClassTo:".form-group",formClass:"n-default n-bootstrap",msgClass:"n-right"});var a="#scroll_table_head",t=e(a).length>0?window.screen.height-e(a).offset().top-180:window.screen.height-250;e(".dataTables_scrollBody").css("height","100%");var l=Config.app.pagesize||25,n=parseInt((window.screen.height-200)/50);n>l&&(l=n),e(document).ready(function(){e(".dataTables").DataTable({searching:!0,order:!1,info:!1,ordering:!1,sorting:!1,aLengthMenu:[10,20,25,50,100],scrollX:!0,scrollY:t,sScrollY:t-100,autoWidth:!1,pagingType:"full_numbers",pageLength:l,language:{sSearch:"搜索：",lengthMenu:"每页 _MENU_ 条记录",emptyTable:"未找到相关数据",paginate:{previous:"上一页",next:"下一页",first:"首页",last:"末页"}}})}),e(".dialog-form input[type='text']").eq(0).focus()},index:function(){var a={add:".addmenus",edit:".editmenus",del:".delmenus",menudetail:".menudetail",addmenudetail:".addmenudetail",editdetail:".editdetail",saveMenuDetail:".saveMenuDetail",saveMenus:".saveMenus",deldetail:".deldetail"};l.open(a.add,"添加","950px","550px"),l.open(a.edit,"编辑","950px","550px"),l.open(a.menudetail,"查看节点因子","1050px","750px"),l.delmenus(a.del,"删除"),l.delmenus(a.deldetail,"删除"),l.cancel("#giveUpBtn"),l.open(a.addmenudetail,"添加节点","950px","550px"),l.open(a.editdetail,"编辑节点","950px","550px"),l.formSubmit(a.saveMenuDetail,e(".ajax-form"),!0),l.formSubmit(a.saveMenus,e(".ajax-form"),!1),e(".btn-search-icon").click(function(){return window.open("http://adminlte.la998.com/pages/UI/icons.html"),null}),e("#detaileType").change(function(){var a=e(this).val(),t=e("#url"),l=e("#condition");0==a?(l.val(""),t.attr("readonly",!1),l.attr("readonly",!0)):1==a&&(t.val(""),t.attr("readonly",!0),l.attr("readonly",!1))})}};return n});