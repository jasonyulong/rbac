/*!
 * Start Bootstrap - Admin v3.3.7+1 (https://github.com/KevinsDeveloper/bootstrap4-admin)
 * Copyright 2013-2019 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap/blob/gh-pages/LICENSE)
 */
define(["jquery","bootstrap","bootstrap-select","template","form-validator","laydate"],function(e,t,t,a,c,n){var r={laydate:function(e){n.render({elem:e,type:"datetime",theme:"molv",max:1})},open:function(t,a){e(t).click(function(){var c=e(t).attr("data-url")||"",n=a||"编辑";Fast.api.open(c,n,{area:["830px","80%"]})})},cancel:function(t){e(t).click(function(){parent.layer.closeAll()})},checked:function(t,a){e(t).click(function(){if(2==a)for(var t=e(this),c=t.is(":checked"),n=e(".data-check_box"),r=0;r<n.length;r++)e(n[r]).prop("checked",c);e(".box_total").html(e("input[name='box_checked']:checked").length)})},checkedId:function(t){for(var a=[],c=e(".data-check_box"),n=0;n<c.length;n++)if(e(c[n]).is(":checked")){var r=e(c[n]).attr(t);r=e.trim(r),r&&a.push(r)}return a},oneCheckId:function(t){e(t).click(function(){e(".box_total").html(e("input[name='box_checked']:checked").length)})},reminder:function(e){parent.layer.open({type:1,maxmin:!0,shadeClose:!0,scrollbar:!1,area:["500px","500px"],content:e})},del:function(t,a,c){var a=a||"确定？";layer.confirm("确定?",{icon:3,title:a},function(a){var n=e(t).attr("data-url");e.post(n,{ids:c},function(t){if(t.code>0){var a="";e.each(t.data,function(e,t){var c=t.success?"":"error";a+='<p class="'+c+'">'+e+". "+t.msg+"</p>"});var c='<div class="layer-content">'+a+"</div>";r.reminder(c)}},"json"),layer.close(a)})}},i={_initialize:function(){e(".selectpicker").selectpicker({selectAllText:"全选",deselectAllText:"取消",liveSearch:!0}),e.validator.setTheme("bootstrap",{validClass:"has-success",invalidClass:"has-error",bindClassTo:".form-group",formClass:"n-default n-bootstrap",msgClass:"n-right"})},index:function(){var t={add:".add",edit:".edit",del:".del",bathdel:".bathdel"};r.checked(".data-check_box_total",2),r.checked(".data-check_box",1),r.cancel("#cancel"),r.laydate("preentrytime"),r.laydate("proceduretime"),r.open(t.add,"添加"),e("#savePending").click(function(){var t=r.checkedId("data-id"),a=e("#savePending").attr("data-url");return 0==t.length?(layer.msg("请选择要操作的用户!",{time:2e3}),!1):void e.post(a,{id:t,status:2},function(t){if(t.code>0){var a="";e.each(t.data,function(e,t){var c=t.success?"":"error";a+='<p class="'+c+'">'+e+". "+t.msg+"</p>"});var c='<div class="layer-content">'+a+"</div>";r.reminder(c)}})}),r.open(t.edit,"编辑"),e(t.bathdel).click(function(){var a=e(this).attr("datas-id"),c=[];if("undefined"==typeof a){var c=r.checkedId("data-id");if(0==c.length)return layer.msg("请选择要删除的用户!",{time:2e3}),!1}else c=a.split(",");r.del(t.bathdel,"确定要删除吗？",c)})}};return i});